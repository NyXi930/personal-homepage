{% extends "bootstrap/base.html" %}

{% block content %}
<div class="container mt-5">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h1>学生信息管理</h1>
        <a href="{{ url_for('new_stud') }}" class="btn btn-success">添加新学生</a>
    </div>

    <!-- 新增：专业筛选按钮区域 -->
    <div class="mb-4">
        <a href="{{ url_for('index') }}" class="btn btn-primary btn-sm">所有学生</a>
        {% for m in majors %}
            <a href="{{ url_for('filter_by_major', major_id=m.id) }}" class="btn btn-outline-secondary btn-sm">{{ m.major_name }}</a>
        {% endfor %}
    </div>

    <!-- 原有学生列表逻辑 -->
    {% for stud in studs %}
    <div class="card mb-3">
        <div class="card-body">
            <h5 class="card-title">{{ stud.student_name }}</h5>
            <p class="card-text">
                专业：{{ stud.major.major_name if stud.major else '未分配' }}
            </p>
            <div class="d-flex">
    <a href="{{ url_for('edit_stud', stu_id=stud.student_id) }}" class="btn btn-info mr-2">编辑</a>
    <form method="POST" action="{{ url_for('del_stud', stud_id=stud.student_id) }}">
        <button type="submit" class="btn btn-danger">删除</button>
    </form>
</div>
        </div>
    </div>
    {% else %}
    <div class="alert alert-info">暂无学生信息，请点击“添加新学生”创建记录。</div>
    {% endfor %}
</div>
{% endblock %}